<head>
  <!-- Vendor -->
  <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
  <!-- malory -->
  <script src="../malory.js" type="text/javascript" charset="utf-8"></script>

  <script type="text/javascript" charset="utf-8">

  var isisCeo;

  var config = [
    {
      workerUrl: "worker.js",
      workerArguments: {'index':'notOOM'},
      initialDemand: "loadIndex",
      budgetedWorkers: 7,
      officiallyOutOfMemory: "officiallyOutOfMemory"
    },{
      workerUrl: "worker.js",
      workerArguments: {'index':'OOM'},
      initialDemand: "loadIndex",
      budgetedWorkers: 5,
      officiallyOutOfMemory: "officiallyOutOfMemory"
    }
  ];

   $(document).ready(function () {

     isisCeo = new malory(config);
     setTimeout(doDemand,500)
     })

   function doDemand(){
     console.log('...demanding gin');
     isisCeo.demand('gin','arg').then(function(data) {
       for (i = 0; i < data.length; i++) {
           console.log(data[i]);
         }
       })
   }

 </script>
</body>
